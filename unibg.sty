\ProvidesPackage{unibg}

\usepackage[backend=biber]{biblatex}
\usepackage[hidelinks]{hyperref}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{caption}
\usepackage{csquotes}
\usepackage{fancyhdr}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{import}
\usepackage{xifthen}

% ----------------------- Bibliography
\addbibresource{bibliography.bib}

% ----------------------- Graphics
\graphicspath{{./images/}}

% ----------------------- Page style
\fancypagestyle{plain}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[CE,CO]{}
  \fancyfoot[LE,RO]{\thepage}
}
\pagestyle{plain}

% ----------------------- Geometry and measures
\setlength{\parskip}{2pt}
\geometry{margin=3cm}
\renewcommand{\baselinestretch}{1.5}
\setcounter{tocdepth}{4}

% ----------------------- New commands
\newcommand{\emptypage}{
  \clearpage
  \thispagestyle{empty}
  \pagenumbering{gobble}
  \mbox{}
}
\newcommand{\toc}{
  \clearpage
  \pagenumbering{Roman}
  \tableofcontents
}

% ----------------------- Title page
\makeatletter
\def\subtitle#1{\gdef\@subtitle{#1}}
\def\department#1{\gdef\@department{#1}}
\def\class#1{\gdef\@class{#1}}
\def\advisor#1{\gdef\@advisor{#1}}
\def\coadvisor#1{\gdef\@coadvisor{#1}}
\def\studentid#1{\gdef\@studentid{#1}}
\def\year#1{\gdef\@year{#1}}
\def\@coadvisor{}

\renewcommand{\maketitle}[2][italian]{
  \newcommand{\@lang}{#1}
  \newcommand{\@degtype}{#2}
  
  \ifthenelse{\equal{\@degtype}{bachelor} \OR \equal{\@degtype}{master}}{}{
    \errmessage{Argument must be either 'bachelor' or 'master'}
  }
  \ifthenelse{\equal{\@lang}{italian} \OR \equal{\@lang}{english}}{}{
    \errmessage{Language must be either 'italian' or 'english'}
  }
  
  \newcommand{\@trClass}{\ifthenelse{\equal{\@lang}{italian}}{Classe}{Class}}
  \newcommand{\@trAdvisor}{\ifthenelse{\equal{\@lang}{italian}}{Relatore}{Advisor}}
  \newcommand{\@trCoAdvisor}{\ifthenelse{\equal{\@lang}{italian}}{Correlatore}{Co-advisor}}
  \newcommand{\@trTesiLaurea}{\ifthenelse{\equal{\@lang}{italian}}{Tesi di Laurea}{Thesis}}
  \newcommand{\@trTesiLaureaMagistrale}{\ifthenelse{\equal{\@lang}{italian}}{Tesi di Laurea Magistrale}{Master Thesis}}
  \newcommand{\@trStudentNumber}{\ifthenelse{\equal{\@lang}{italian}}{Matricola n.}{Student number}}
  \newcommand{\@trAnnoAccademico}{\ifthenelse{\equal{\@lang}{italian}}{ANNO ACCADMICO}{ACADEMIC YEAR}}

  \begin{titlepage}
    \begin{center}
      \large
      UNIVERSITÃ€ DEGLI STUDI DI BERGAMO \\
      \vspace{0.5cm}
      \normalsize
      \@department \\
      \@trClass~\@class

      \vfill

      \Huge
      \textbf{\@title}

      \LARGE
      \@subtitle
    \end{center}

    \vfill

    \begin{flushleft}
      \@trAdvisor \\
      \@advisor
    \end{flushleft}

    \ifthenelse{\equal{\@coadvisor}{}}{}{
      \begin{flushleft}
        \@trCoAdvisor \\
        \@coadvisor
      \end{flushleft}
    }

    \begin{flushright}
      \ifthenelse{\equal{\@degtype}{master}}{\@trTesiLaureaMagistrale}{\@trTesiLaurea} \\
      \@author \\
      \@trStudentNumber~\@studentid
    \end{flushright}

    \vfill

    \begin{center}
      \@trAnnoAccademico~\@year
    \end{center}
  \end{titlepage}
}
\makeatother
